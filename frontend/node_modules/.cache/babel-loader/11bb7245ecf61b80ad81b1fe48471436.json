{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import\"../styles/CartScreen.css\";import{useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{Link}from\"react-router-dom\";import StripeCheckout from\"react-stripe-checkout\";// Components\nimport CartItem from\"../components/CartItem\";// Actions\nimport{addToCart,removeFromCart}from\"../redux/actions/cartActions\";var CartScreen=function CartScreen(){var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;useEffect(function(){},[]);var qtyChangeHandler=function qtyChangeHandler(id,qty){dispatch(addToCart(id,qty));};// Removing selected item from the cart\nvar removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};// To get the total items present in the cart\nvar getCartCount=function getCartCount(){return cartItems.reduce(function(qty,item){return Number(item.qty)+qty;},0);};// Getting the total Price \nvar getCartSubTotal=function getCartSubTotal(){return cartItems.reduce(function(price,item){return price+item.price*item.qty;},0).toFixed(2);};// Make Payment\nvar makePayment=function makePayment(token){var body={token:token,product:cartItems,price:getCartSubTotal()};var headers={\"content-type\":\"application/json\"};return fetch(\"http://localhost:5000/payment\",{method:\"POST\",headers:headers,body:JSON.stringify(body)}).then(function(response){console.log(\"RESPONSE\",response);var status=response.status;console.log(\"status\",status);// Empty The cart after Succcesfull Payment\ncartItems.forEach(function(item){return dispatch(removeFromCart(item.product));});}).catch(function(error){console.log(\"ERROR\",error);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"cartscreen\",style:{marginBottom:\"460px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cartscreen__left\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(\"div\",{children:[\"Your Cart Is Empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):cartItems.map(function(item){return/*#__PURE__*/_jsx(CartItem,{item:item,qtyChangeHandler:qtyChangeHandler,removeHandler:removeFromCartHandler},item.product);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cartscreen__right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cartscreen__info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal (\",getCartCount(),\") items\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"TOTAL(INR) : \\u20B9\",getCartSubTotal(),\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"TOTAL(USD) : $\",getCartSubTotal()*0.014,\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){console.log(process.env.REACT_APP_KEY);},children:/*#__PURE__*/_jsx(StripeCheckout,{stripeKey:\"pk_test_51IPsBgEwEbzzqba9A4AQsmpCvFKjJbN9AyCrLYwCykIR1XTe8mFHcRQB6qWHz1Y6D8XZSK0gHi2CIr92nDzrs07f00W0hXIIRv\",token:makePayment,amount:getCartSubTotal()*100*0.014,shippingAddress:true,billingAddress:true,name:\"Buy Products\"})})})]})]})});};export default CartScreen;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/bs/Pharmacy-Management-Application/frontend/src/screens/CartScreen.js"],"names":["useEffect","useSelector","useDispatch","Link","StripeCheckout","CartItem","addToCart","removeFromCart","CartScreen","dispatch","cart","state","cartItems","qtyChangeHandler","id","qty","removeFromCartHandler","getCartCount","reduce","item","Number","getCartSubTotal","price","toFixed","makePayment","token","body","product","headers","fetch","method","JSON","stringify","then","response","console","log","status","forEach","catch","error","marginBottom","length","map","process","env","REACT_APP_KEY"],"mappings":"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","sourcesContent":["import \"../styles/CartScreen.css\";\r\nimport { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport StripeCheckout from \"react-stripe-checkout\";\r\n\r\n// Components\r\nimport CartItem from \"../components/CartItem\";\r\n\r\n// Actions\r\nimport { addToCart, removeFromCart } from \"../redux/actions/cartActions\";\r\n\r\n\r\nconst CartScreen = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems } = cart;\r\n\r\n  useEffect(() => { }, []);\r\n\r\n  const qtyChangeHandler = (id, qty) => {\r\n    dispatch(addToCart(id, qty));\r\n  };\r\n\r\n  // Removing selected item from the cart\r\n  const removeFromCartHandler = (id) => {\r\n    dispatch(removeFromCart(id));\r\n  };\r\n\r\n  // To get the total items present in the cart\r\n  const getCartCount = () => {\r\n    return cartItems.reduce((qty, item) => Number(item.qty) + qty, 0);\r\n  };\r\n  // Getting the total Price \r\n  const getCartSubTotal = () => {\r\n    return cartItems\r\n      .reduce((price, item) => price + item.price * item.qty, 0)\r\n      .toFixed(2);\r\n  };\r\n    \r\n\r\n  // Make Payment\r\n  const makePayment = token => {\r\n    const body = {\r\n      token,\r\n      product: cartItems,\r\n      price: getCartSubTotal()\r\n\r\n    }\r\n    const headers = {\r\n      \"content-type\": \"application/json\"\r\n    }\r\n\r\n    return fetch(`http://localhost:5000/payment`, {\r\n      method: \"POST\",\r\n      headers: headers,\r\n      body: JSON.stringify(body)\r\n    }).then(response => {\r\n      console.log(\"RESPONSE\", response)\r\n      const { status } = response\r\n      console.log(\"status\", status)\r\n\r\n      // Empty The cart after Succcesfull Payment\r\n      cartItems.forEach(item => dispatch(removeFromCart(item.product)))\r\n    }).catch(error => {\r\n      console.log(\"ERROR\", error)\r\n    })\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <div className=\"cartscreen\" style={{ marginBottom: \"460px\" }}>\r\n        <div className=\"cartscreen__left\">\r\n          <h2>Shopping Cart</h2>\r\n\r\n          {cartItems.length === 0 ? (\r\n            <div>\r\n              Your Cart Is Empty <Link to=\"/\">Go Back</Link>\r\n            </div>\r\n          ) : (\r\n            cartItems.map((item) => (\r\n              <CartItem\r\n                key={item.product}\r\n                item={item}\r\n                qtyChangeHandler={qtyChangeHandler}\r\n                removeHandler={removeFromCartHandler}\r\n              />\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"cartscreen__right\">\r\n          <div className=\"cartscreen__info\">\r\n            <p>Subtotal ({getCartCount()}) items</p>\r\n            <p>TOTAL(INR) : â‚¹{getCartSubTotal()} </p>\r\n            <p>TOTAL(USD) : ${getCartSubTotal() * 0.014} </p>\r\n          </div>\r\n          <div>\r\n            <button type=\"button\" onClick={function() {\r\n              console.log(process.env.REACT_APP_KEY)\r\n              }}>\r\n              <StripeCheckout stripeKey=\"pk_test_51IPsBgEwEbzzqba9A4AQsmpCvFKjJbN9AyCrLYwCykIR1XTe8mFHcRQB6qWHz1Y6D8XZSK0gHi2CIr92nDzrs07f00W0hXIIRv\"\r\n                token={makePayment} amount={getCartSubTotal() * 100 * 0.014}\r\n                shippingAddress\r\n                billingAddress\r\n                name=\"Buy Products\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CartScreen;\r\n"]},"metadata":{},"sourceType":"module"}